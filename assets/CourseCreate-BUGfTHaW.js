import{u as e,j as s,e as r}from"./index-SvUTDYpM.js";import{u as a,r as t}from"./react-c0U51vzo.js";import{P as l}from"./PageHeader-yfs0G1du.js";import{C as i,b as c}from"./card-C7UMvtm_.js";import{I as d}from"./input-Cf836u6s.js";import{B as o}from"./button-C_oKDOXG.js";import{c as n}from"./courses-BxWJLNIE.js";import"./firebase-Bz9ybdfi.js";import"./icons-C41eJsKq.js";import"./utils-CCUt_dAN.js";function m(){const{role:m}=e(),u=a(),[x,p]=t.useState([]),[j,h]=t.useState(!0),[b,f]=t.useState(!1),[v,N]=t.useState({code:"",title:"",credits:3,semester:"MD-1",instructor:"",description:""});t.useEffect(()=>{(async()=>{try{const e=await r();p(e.filter(e=>"teacher"===e.role))}finally{h(!1)}})()},[]);return"admin"!==m&&"teacher"!==m?s.jsxs("div",{className:"space-y-6",children:[s.jsx(l,{title:"Create Course",breadcrumb:[{label:"Courses",to:"/courses"},{label:"Create"}]}),s.jsx(i,{children:s.jsx(c,{className:"p-6",children:"Only admins and teachers can create courses."})})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsx(l,{title:"Create Course",breadcrumb:[{label:"Courses",to:"/courses"},{label:"Create"}]}),s.jsx(i,{children:s.jsx(c,{className:"p-6",children:s.jsxs("form",{onSubmit:async e=>{e.preventDefault(),f(!0);try{await n({code:v.code.trim(),title:v.title.trim(),credits:Number(v.credits),semester:v.semester,instructor:v.instructor,description:v.description.trim()}),u("/courses",{replace:!0})}finally{f(!1)}},className:"space-y-6 max-w-3xl",children:[s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Course Code *"}),s.jsx(d,{value:v.code,onChange:e=>N({...v,code:e.target.value}),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Course Title *"}),s.jsx(d,{value:v.title,onChange:e=>N({...v,title:e.target.value}),required:!0})]})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Credits *"}),s.jsx(d,{type:"number",min:0,value:v.credits,onChange:e=>N({...v,credits:Number(e.target.value)}),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Semester *"}),s.jsx("select",{className:"w-full h-11 border-2 border-slate-200 rounded-xl px-3",value:v.semester,onChange:e=>N({...v,semester:e.target.value}),children:Array.from({length:11},(e,s)=>`MD-${s+1}`).map(e=>s.jsx("option",{value:e,children:e},e))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Instructor *"}),j?s.jsxs("div",{className:"w-full h-11 border-2 border-slate-200 rounded-xl px-3 flex items-center bg-white/85",children:[s.jsx("div",{className:"w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin mr-2"}),s.jsx("span",{className:"text-slate-500",children:"Loading teachers..."})]}):s.jsxs("select",{className:"w-full h-11 border-2 border-slate-200 rounded-xl px-3",value:v.instructor,onChange:e=>N({...v,instructor:e.target.value}),required:!0,children:[s.jsx("option",{value:"",children:"Select instructor"}),x.map(e=>s.jsxs("option",{value:e.email||"",children:[e.name," (",e.email,")"]},e.id))]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Description *"}),s.jsx("textarea",{className:"w-full border-2 border-slate-200 rounded-xl px-3 py-3 focus:border-blue-400 focus:outline-none resize-none",rows:4,value:v.description,onChange:e=>N({...v,description:e.target.value}),required:!0})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(o,{type:"button",variant:"outline",onClick:()=>u(-1),disabled:b,children:"Cancel"}),s.jsx(o,{type:"submit",disabled:b,children:b?"Creating...":"Create Course"})]})]})})})]})}export{m as default};
