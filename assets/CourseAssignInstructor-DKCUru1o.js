import{u as s,j as e,e as a}from"./index-SvUTDYpM.js";import{u as r,g as t,r as i}from"./react-c0U51vzo.js";import{P as l}from"./PageHeader-yfs0G1du.js";import{C as n,b as c}from"./card-C7UMvtm_.js";import{B as o}from"./button-C_oKDOXG.js";import{getCourseById as d}from"./enrollments-3oX83C0U.js";import{a as u}from"./teacherAssignments-DCF62PJd.js";import"./firebase-Bz9ybdfi.js";import"./icons-C41eJsKq.js";import"./utils-CCUt_dAN.js";function m(){const m=r(),{role:j}=s(),{courseId:x}=t(),[p,f]=i.useState(!0),[h,b]=i.useState(null),[g,v]=i.useState([]),[y,C]=i.useState(""),[N,A]=i.useState(!1);i.useEffect(()=>{(async()=>{if(x){f(!0);try{const s=await d(x);b(s);const e=await a();v(e.filter(s=>"teacher"===s.role))}finally{f(!1)}}})()},[x]);return"admin"!==j?e.jsxs("div",{className:"space-y-6",children:[e.jsx(l,{title:"Assign Instructor",breadcrumb:[{label:"Courses",to:"/courses"},{label:"Assign Instructor"}]}),e.jsx(n,{children:e.jsx(c,{className:"p-6",children:"Only admins can assign instructors."})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx(l,{title:"Assign Instructor",breadcrumb:[{label:"Courses",to:"/courses"},{label:h?`${h.code} — ${h.title}`:"Course"},{label:"Assign Instructor"}]}),e.jsx(n,{children:e.jsx(c,{className:"p-6 space-y-4",children:p?e.jsx("div",{className:"h-40 rounded-xl bg-slate-100 animate-pulse"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-slate-700 font-medium",children:h?`${h.code} — ${h.title}`:""}),e.jsxs("select",{className:"w-full h-11 border-2 border-slate-200 rounded-xl px-3",value:y,onChange:s=>C(s.target.value),children:[e.jsx("option",{value:"",children:"Select a teacher"}),g.map(s=>e.jsxs("option",{value:s.id,children:[s.name," (",s.email,")"]},s.id))]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(o,{variant:"outline",onClick:()=>m(-1),disabled:N,children:"Cancel"}),e.jsx(o,{onClick:async()=>{if(x&&y){A(!0);try{const s=g.find(s=>s.id===y);if(!s)return;await u(s.id,s.email||"",x),m(`/courses/${x}`,{replace:!0})}finally{A(!1)}}},disabled:!y||N,children:N?"Assigning...":"Assign Instructor"})]})]})})})]})}export{m as default};
