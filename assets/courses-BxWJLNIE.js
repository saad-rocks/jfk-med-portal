import{e as r,d as e,k as t}from"./firebase-Bz9ybdfi.js";import{f as s,a as o}from"./index-SvUTDYpM.js";const c=new Map;async function a(r){const a=o.currentUser;if(!a)throw new Error("Must be signed in");try{const o=await t(e(s,"courses"),{code:r.code,title:r.title,credits:Number(r.credits),semester:r.semester,instructor:r.instructor,description:r.description,ownerId:a.uid,createdAt:Date.now()});return c.delete("all"),o.id}catch(n){throw console.error("Error creating course:",n),new Error("Failed to create course")}}async function n(){try{const t="all",o=c.get(t);if(o&&Date.now()-o.timestamp<3e5)return o.data;const a=await r(e(s,"courses")),n=[];return a.forEach(r=>{const e=r.data();n.push({...e,id:r.id})}),c.set(t,{data:n,timestamp:Date.now()}),n}catch(t){throw console.error("Error fetching courses:",t),new Error("Failed to fetch courses")}}export{a as c,n as l};
