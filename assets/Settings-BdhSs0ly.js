import{u as e,d as t,j as s,b as r,k as n}from"./index-SvUTDYpM.js";import{P as a}from"./PageHeader-yfs0G1du.js";import{r as i}from"./react-c0U51vzo.js";import{g as o,s as c,a as l,u as d}from"./index.esm-C1BYIobo.js";import{C as u,a as m,c as p,b as f}from"./card-C7UMvtm_.js";import{B as h}from"./button-C_oKDOXG.js";import{I as x}from"./input-Cf836u6s.js";import{T as g,a as j,b as y,c as v}from"./tabs-DFGuuRa4.js";import{B as b}from"./badge-mKe8BOon.js";import{U as w,B as N,ai as k,aj as _,G as z,E as P,m as S,n as $,o as E,ak as Z,C as A,i as C,al as I,am as O,l as T,A as U,ae as D,T as F}from"./icons-C41eJsKq.js";import"./firebase-Bz9ybdfi.js";import"./utils-CCUt_dAN.js";const R=(e,t,s)=>{if(e&&"reportValidity"in e){const r=o(s,t);e.setCustomValidity(r&&r.message||""),e.reportValidity()}},M=(e,t)=>{for(const s in t.fields){const r=t.fields[s];r&&r.ref&&"reportValidity"in r.ref?R(r.ref,s,e):r&&r.refs&&r.refs.forEach(t=>R(t,s,e))}},L=(e,t)=>{t.shouldUseNativeValidation&&M(e,t);const s={};for(const r in e){const n=o(t.fields,r),a=Object.assign(e[r]||{},{ref:n&&n.ref});if(V(t.names||Object.keys(e),r)){const e=Object.assign({},o(s,r));c(e,"root",a),c(s,r,e)}else c(s,r,a)}return s},V=(e,t)=>{const s=Y(t);return e.some(e=>Y(e).match(`^${s}\\.\\d+`))};function Y(e){return e.replace(/\]|\[/g,"")}function G(e,t,s){function r(s,r){var n;Object.defineProperty(s,"_zod",{value:s._zod??{},enumerable:!1}),(n=s._zod).traits??(n.traits=new Set),s._zod.traits.add(e),t(s,r);for(const e in i.prototype)e in s||Object.defineProperty(s,e,{value:i.prototype[e].bind(s)});s._zod.constr=i,s._zod.def=r}const n=s?.Parent??Object;class a extends n{}function i(e){var t;const n=s?.Parent?new a:this;r(n,e),(t=n._zod).deferred??(t.deferred=[]);for(const s of n._zod.deferred)s();return n}return Object.defineProperty(a,"name",{value:e}),Object.defineProperty(i,"init",{value:r}),Object.defineProperty(i,Symbol.hasInstance,{value:t=>!!(s?.Parent&&t instanceof s.Parent)||t?._zod?.traits?.has(e)}),Object.defineProperty(i,"name",{value:e}),i}class q extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class W extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}const B={};function J(e){return B}function K(e,t){return"bigint"==typeof t?t.toString():t}function H(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function X(e){return null==e}function Q(e){const t=e.startsWith("^")?1:0,s=e.endsWith("$")?e.length-1:e.length;return e.slice(t,s)}const ee=Symbol("evaluating");function te(e,t,s){let r;Object.defineProperty(e,t,{get(){if(r!==ee)return void 0===r&&(r=ee,r=s()),r},set(s){Object.defineProperty(e,t,{value:s})},configurable:!0})}function se(e,t,s){Object.defineProperty(e,t,{value:s,writable:!0,enumerable:!0,configurable:!0})}function re(...e){const t={};for(const s of e){const e=Object.getOwnPropertyDescriptors(s);Object.assign(t,e)}return Object.defineProperties({},t)}function ne(e){return JSON.stringify(e)}const ae="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function ie(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}const oe=H(()=>{if("undefined"!=typeof navigator&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return new Function(""),!0}catch(e){return!1}});function ce(e){if(!1===ie(e))return!1;const t=e.constructor;if(void 0===t)return!0;const s=t.prototype;return!1!==ie(s)&&!1!==Object.prototype.hasOwnProperty.call(s,"isPrototypeOf")}function le(e){return ce(e)?{...e}:e}const de=new Set(["string","number","symbol"]);function ue(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function me(e,t,s){const r=new e._zod.constr(t??e._zod.def);return t&&!s?.parent||(r._zod.parent=e),r}function pe(e){const t=e;if(!t)return{};if("string"==typeof t)return{error:()=>t};if(void 0!==t?.message){if(void 0!==t?.error)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,"string"==typeof t.error?{...t,error:()=>t.error}:t}function fe(e,t=0){if(!0===e.aborted)return!0;for(let s=t;s<e.issues.length;s++)if(!0!==e.issues[s]?.continue)return!0;return!1}function he(e,t){return t.map(t=>{var s;return(s=t).path??(s.path=[]),t.path.unshift(e),t})}function xe(e){return"string"==typeof e?e:e?.message}function ge(e,t,s){const r={...e,path:e.path??[]};if(!e.message){const n=xe(e.inst?._zod.def?.error?.(e))??xe(t?.error?.(e))??xe(s.customError?.(e))??xe(s.localeError?.(e))??"Invalid input";r.message=n}return delete r.inst,delete r.continue,t?.reportInput||delete r.input,r}function je(e){return Array.isArray(e)?"array":"string"==typeof e?"string":"unknown"}function ye(...e){const[t,s,r]=e;return"string"==typeof t?{message:t,code:"custom",input:s,inst:r}:{...t}}const ve=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,K,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},be=G("$ZodError",ve),we=G("$ZodError",ve,{Parent:Error});const Ne=e=>(t,s,r,n)=>{const a=r?Object.assign(r,{async:!1}):{async:!1},i=t._zod.run({value:s,issues:[]},a);if(i instanceof Promise)throw new q;if(i.issues.length){const t=new(n?.Err??e)(i.issues.map(e=>ge(e,a,J())));throw ae(t,n?.callee),t}return i.value},ke=Ne(we),_e=e=>async(t,s,r,n)=>{const a=r?Object.assign(r,{async:!0}):{async:!0};let i=t._zod.run({value:s,issues:[]},a);if(i instanceof Promise&&(i=await i),i.issues.length){const t=new(n?.Err??e)(i.issues.map(e=>ge(e,a,J())));throw ae(t,n?.callee),t}return i.value},ze=_e(we),Pe=e=>(t,s,r)=>{const n=r?{...r,async:!1}:{async:!1},a=t._zod.run({value:s,issues:[]},n);if(a instanceof Promise)throw new q;return a.issues.length?{success:!1,error:new(e??be)(a.issues.map(e=>ge(e,n,J())))}:{success:!0,data:a.value}},Se=Pe(we),$e=e=>async(t,s,r)=>{const n=r?Object.assign(r,{async:!0}):{async:!0};let a=t._zod.run({value:s,issues:[]},n);return a instanceof Promise&&(a=await a),a.issues.length?{success:!1,error:new e(a.issues.map(e=>ge(e,n,J())))}:{success:!0,data:a.value}},Ee=$e(we),Ze=/^[cC][^\s-]{8,}$/,Ae=/^[0-9a-z]+$/,Ce=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,Ie=/^[0-9a-vA-V]{20}$/,Oe=/^[A-Za-z0-9]{27}$/,Te=/^[a-zA-Z0-9_-]{21}$/,Ue=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,De=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Fe=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,Re=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/;const Me=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Le=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,Ve=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,Ye=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Ge=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,qe=/^[A-Za-z0-9_-]*$/,We=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,Be=/^\+(?:[0-9]){6,14}[0-9]$/,Je="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",Ke=new RegExp(`^${Je}$`);function He(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return"number"==typeof e.precision?-1===e.precision?`${t}`:0===e.precision?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}const Xe=/^[^A-Z]*$/,Qe=/^[^a-z]*$/,et=G("$ZodCheck",(e,t)=>{var s;e._zod??(e._zod={}),e._zod.def=t,(s=e._zod).onattach??(s.onattach=[])}),tt=G("$ZodCheckMaxLength",(e,t)=>{var s;et.init(e,t),(s=e._zod.def).when??(s.when=e=>{const t=e.value;return!X(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{const s=e._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<s&&(e._zod.bag.maximum=t.maximum)}),e._zod.check=s=>{const r=s.value;if(r.length<=t.maximum)return;const n=je(r);s.issues.push({origin:n,code:"too_big",maximum:t.maximum,inclusive:!0,input:r,inst:e,continue:!t.abort})}}),st=G("$ZodCheckMinLength",(e,t)=>{var s;et.init(e,t),(s=e._zod.def).when??(s.when=e=>{const t=e.value;return!X(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{const s=e._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>s&&(e._zod.bag.minimum=t.minimum)}),e._zod.check=s=>{const r=s.value;if(r.length>=t.minimum)return;const n=je(r);s.issues.push({origin:n,code:"too_small",minimum:t.minimum,inclusive:!0,input:r,inst:e,continue:!t.abort})}}),rt=G("$ZodCheckLengthEquals",(e,t)=>{var s;et.init(e,t),(s=e._zod.def).when??(s.when=e=>{const t=e.value;return!X(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{const s=e._zod.bag;s.minimum=t.length,s.maximum=t.length,s.length=t.length}),e._zod.check=s=>{const r=s.value,n=r.length;if(n===t.length)return;const a=je(r),i=n>t.length;s.issues.push({origin:a,...i?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:s.value,inst:e,continue:!t.abort})}}),nt=G("$ZodCheckStringFormat",(e,t)=>{var s,r;et.init(e,t),e._zod.onattach.push(e=>{const s=e._zod.bag;s.format=t.format,t.pattern&&(s.patterns??(s.patterns=new Set),s.patterns.add(t.pattern))}),t.pattern?(s=e._zod).check??(s.check=s=>{t.pattern.lastIndex=0,t.pattern.test(s.value)||s.issues.push({origin:"string",code:"invalid_format",format:t.format,input:s.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(r=e._zod).check??(r.check=()=>{})}),at=G("$ZodCheckRegex",(e,t)=>{nt.init(e,t),e._zod.check=s=>{t.pattern.lastIndex=0,t.pattern.test(s.value)||s.issues.push({origin:"string",code:"invalid_format",format:"regex",input:s.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),it=G("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=Xe),nt.init(e,t)}),ot=G("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=Qe),nt.init(e,t)}),ct=G("$ZodCheckIncludes",(e,t)=>{et.init(e,t);const s=ue(t.includes),r=new RegExp("number"==typeof t.position?`^.{${t.position}}${s}`:s);t.pattern=r,e._zod.onattach.push(e=>{const t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(r)}),e._zod.check=s=>{s.value.includes(t.includes,t.position)||s.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:s.value,inst:e,continue:!t.abort})}}),lt=G("$ZodCheckStartsWith",(e,t)=>{et.init(e,t);const s=new RegExp(`^${ue(t.prefix)}.*`);t.pattern??(t.pattern=s),e._zod.onattach.push(e=>{const t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(s)}),e._zod.check=s=>{s.value.startsWith(t.prefix)||s.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:s.value,inst:e,continue:!t.abort})}}),dt=G("$ZodCheckEndsWith",(e,t)=>{et.init(e,t);const s=new RegExp(`.*${ue(t.suffix)}$`);t.pattern??(t.pattern=s),e._zod.onattach.push(e=>{const t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(s)}),e._zod.check=s=>{s.value.endsWith(t.suffix)||s.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:s.value,inst:e,continue:!t.abort})}}),ut=G("$ZodCheckOverwrite",(e,t)=>{et.init(e,t),e._zod.check=e=>{e.value=t.tx(e.value)}});class mt{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if("function"==typeof e)return e(this,{execution:"sync"}),void e(this,{execution:"async"});const t=e.split("\n").filter(e=>e),s=Math.min(...t.map(e=>e.length-e.trimStart().length)),r=t.map(e=>e.slice(s)).map(e=>" ".repeat(2*this.indent)+e);for(const n of r)this.content.push(n)}compile(){const e=Function,t=this?.args;return new e(...t,[...(this?.content??[""]).map(e=>`  ${e}`)].join("\n"))}}const pt={major:4,minor:1,patch:0},ft=G("$ZodType",(e,t)=>{var s;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=pt;const r=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&r.unshift(e);for(const n of r)for(const t of n._zod.onattach)t(e);if(0===r.length)(s=e._zod).deferred??(s.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const t=(e,t,s)=>{let r,n=fe(e);for(const a of t){if(a._zod.def.when){if(!a._zod.def.when(e))continue}else if(n)continue;const t=e.issues.length,i=a._zod.check(e);if(i instanceof Promise&&!1===s?.async)throw new q;if(r||i instanceof Promise)r=(r??Promise.resolve()).then(async()=>{await i;e.issues.length!==t&&(n||(n=fe(e,t)))});else{if(e.issues.length===t)continue;n||(n=fe(e,t))}}return r?r.then(()=>e):e},s=(s,n,a)=>{if(fe(s))return s.aborted=!0,s;const i=t(n,r,a);if(i instanceof Promise){if(!1===a.async)throw new q;return i.then(t=>e._zod.parse(t,a))}return e._zod.parse(i,a)};e._zod.run=(n,a)=>{if(a.skipChecks)return e._zod.parse(n,a);if("backward"===a.direction){const t=e._zod.parse({value:n.value,issues:[]},{...a,skipChecks:!0});return t instanceof Promise?t.then(e=>s(e,n,a)):s(t,n,a)}const i=e._zod.parse(n,a);if(i instanceof Promise){if(!1===a.async)throw new q;return i.then(e=>t(e,r,a))}return t(i,r,a)}}e["~standard"]={validate:t=>{try{const s=Se(e,t);return s.success?{value:s.data}:{issues:s.error?.issues}}catch(s){return Ee(e,t).then(e=>e.success?{value:e.data}:{issues:e.error?.issues})}},vendor:"zod",version:1}}),ht=G("$ZodString",(e,t)=>{var s;ft.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??(s=e._zod.bag,new RegExp(`^${s?`[\\s\\S]{${s?.minimum??0},${s?.maximum??""}}`:"[\\s\\S]*"}$`)),e._zod.parse=(s,r)=>{if(t.coerce)try{s.value=String(s.value)}catch(n){}return"string"==typeof s.value||s.issues.push({expected:"string",code:"invalid_type",input:s.value,inst:e}),s}}),xt=G("$ZodStringFormat",(e,t)=>{nt.init(e,t),ht.init(e,t)}),gt=G("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=De),xt.init(e,t)}),jt=G("$ZodUUID",(e,t)=>{if(t.version){const e={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(void 0===e)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=Fe(e))}else t.pattern??(t.pattern=Fe());xt.init(e,t)}),yt=G("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=Re),xt.init(e,t)}),vt=G("$ZodURL",(e,t)=>{xt.init(e,t),e._zod.check=s=>{try{const r=s.value.trim(),n=new URL(r);return t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(n.hostname)||s.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:We.source,input:s.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(n.protocol.endsWith(":")?n.protocol.slice(0,-1):n.protocol)||s.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:s.value,inst:e,continue:!t.abort})),void(t.normalize?s.value=n.href:s.value=r)}catch(r){s.issues.push({code:"invalid_format",format:"url",input:s.value,inst:e,continue:!t.abort})}}}),bt=G("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),xt.init(e,t)}),wt=G("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=Te),xt.init(e,t)}),Nt=G("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=Ze),xt.init(e,t)}),kt=G("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=Ae),xt.init(e,t)}),_t=G("$ZodULID",(e,t)=>{t.pattern??(t.pattern=Ce),xt.init(e,t)}),zt=G("$ZodXID",(e,t)=>{t.pattern??(t.pattern=Ie),xt.init(e,t)}),Pt=G("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=Oe),xt.init(e,t)}),St=G("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=function(e){const t=He({precision:e.precision}),s=["Z"];e.local&&s.push(""),e.offset&&s.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const r=`${t}(?:${s.join("|")})`;return new RegExp(`^${Je}T(?:${r})$`)}(t)),xt.init(e,t)}),$t=G("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=Ke),xt.init(e,t)}),Et=G("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=new RegExp(`^${He(t)}$`)),xt.init(e,t)}),Zt=G("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=Ue),xt.init(e,t)}),At=G("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=Me),xt.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.format="ipv4"})}),Ct=G("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=Le),xt.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.format="ipv6"}),e._zod.check=s=>{try{new URL(`http://[${s.value}]`)}catch{s.issues.push({code:"invalid_format",format:"ipv6",input:s.value,inst:e,continue:!t.abort})}}}),It=G("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=Ve),xt.init(e,t)}),Ot=G("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=Ye),xt.init(e,t),e._zod.check=s=>{const[r,n]=s.value.split("/");try{if(!n)throw new Error;const e=Number(n);if(`${e}`!==n)throw new Error;if(e<0||e>128)throw new Error;new URL(`http://[${r}]`)}catch{s.issues.push({code:"invalid_format",format:"cidrv6",input:s.value,inst:e,continue:!t.abort})}}});function Tt(e){if(""===e)return!0;if(e.length%4!=0)return!1;try{return atob(e),!0}catch{return!1}}const Ut=G("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=Ge),xt.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.contentEncoding="base64"}),e._zod.check=s=>{Tt(s.value)||s.issues.push({code:"invalid_format",format:"base64",input:s.value,inst:e,continue:!t.abort})}});const Dt=G("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=qe),xt.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.contentEncoding="base64url"}),e._zod.check=s=>{(function(e){if(!qe.test(e))return!1;const t=e.replace(/[-_]/g,e=>"-"===e?"+":"/");return Tt(t.padEnd(4*Math.ceil(t.length/4),"="))})(s.value)||s.issues.push({code:"invalid_format",format:"base64url",input:s.value,inst:e,continue:!t.abort})}}),Ft=G("$ZodE164",(e,t)=>{t.pattern??(t.pattern=Be),xt.init(e,t)});const Rt=G("$ZodJWT",(e,t)=>{xt.init(e,t),e._zod.check=s=>{(function(e,t=null){try{const s=e.split(".");if(3!==s.length)return!1;const[r]=s;if(!r)return!1;const n=JSON.parse(atob(r));return!("typ"in n&&"JWT"!==n?.typ||!n.alg||t&&(!("alg"in n)||n.alg!==t))}catch{return!1}})(s.value,t.alg)||s.issues.push({code:"invalid_format",format:"jwt",input:s.value,inst:e,continue:!t.abort})}}),Mt=G("$ZodUnknown",(e,t)=>{ft.init(e,t),e._zod.parse=e=>e}),Lt=G("$ZodNever",(e,t)=>{ft.init(e,t),e._zod.parse=(t,s)=>(t.issues.push({expected:"never",code:"invalid_type",input:t.value,inst:e}),t)});function Vt(e,t,s){e.issues.length&&t.issues.push(...he(s,e.issues)),t.value[s]=e.value}const Yt=G("$ZodArray",(e,t)=>{ft.init(e,t),e._zod.parse=(s,r)=>{const n=s.value;if(!Array.isArray(n))return s.issues.push({expected:"array",code:"invalid_type",input:n,inst:e}),s;s.value=Array(n.length);const a=[];for(let e=0;e<n.length;e++){const i=n[e],o=t.element._zod.run({value:i,issues:[]},r);o instanceof Promise?a.push(o.then(t=>Vt(t,s,e))):Vt(o,s,e)}return a.length?Promise.all(a).then(()=>s):s}});function Gt(e,t,s,r){e.issues.length&&t.issues.push(...he(s,e.issues)),void 0===e.value?s in r&&(t.value[s]=void 0):t.value[s]=e.value}function qt(e){const t=Object.keys(e.shape);for(const n of t)if(!e.shape[n]._zod.traits.has("$ZodType"))throw new Error(`Invalid element at key "${n}": expected a Zod schema`);const s=(r=e.shape,Object.keys(r).filter(e=>"optional"===r[e]._zod.optin&&"optional"===r[e]._zod.optout));var r;return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(s)}}function Wt(e,t,s,r,n,a){const i=[],o=n.keySet,c=n.catchall._zod,l=c.def.type;for(const d of Object.keys(t)){if(o.has(d))continue;if("never"===l){i.push(d);continue}const n=c.run({value:t[d],issues:[]},r);n instanceof Promise?e.push(n.then(e=>Gt(e,s,d,t))):Gt(n,s,d,t)}return i.length&&s.issues.push({code:"unrecognized_keys",keys:i,input:t,inst:a}),e.length?Promise.all(e).then(()=>s):s}const Bt=G("$ZodObject",(e,t)=>{ft.init(e,t);const s=H(()=>qt(t));te(e._zod,"propValues",()=>{const e=t.shape,s={};for(const t in e){const r=e[t]._zod;if(r.values){s[t]??(s[t]=new Set);for(const e of r.values)s[t].add(e)}}return s});const r=ie,n=t.catchall;let a;e._zod.parse=(t,i)=>{a??(a=s.value);const o=t.value;if(!r(o))return t.issues.push({expected:"object",code:"invalid_type",input:o,inst:e}),t;t.value={};const c=[],l=a.shape;for(const e of a.keys){const s=l[e]._zod.run({value:o[e],issues:[]},i);s instanceof Promise?c.push(s.then(s=>Gt(s,t,e,o))):Gt(s,t,e,o)}return n?Wt(c,o,t,i,s.value,e):c.length?Promise.all(c).then(()=>t):t}}),Jt=G("$ZodObjectJIT",(e,t)=>{Bt.init(e,t);const s=e._zod.parse,r=H(()=>qt(t));let n;const a=ie,i=!B.jitless,o=i&&oe.value,c=t.catchall;let l;e._zod.parse=(d,u)=>{l??(l=r.value);const m=d.value;return a(m)?i&&o&&!1===u?.async&&!0!==u.jitless?(n||(n=(e=>{const t=new mt(["shape","payload","ctx"]),s=r.value,n=e=>{const t=ne(e);return`shape[${t}]._zod.run({ value: input[${t}], issues: [] }, ctx)`};t.write("const input = payload.value;");const a=Object.create(null);let i=0;for(const r of s.keys)a[r]="key_"+i++;t.write("const newResult = {}");for(const r of s.keys){const e=a[r],s=ne(r);t.write(`const ${e} = ${n(r)};`),t.write(`\n        if (${e}.issues.length) {\n          payload.issues = payload.issues.concat(${e}.issues.map(iss => ({\n            ...iss,\n            path: iss.path ? [${s}, ...iss.path] : [${s}]\n          })));\n        }\n        \n        if (${e}.value === undefined) {\n          if (${s} in input) {\n            newResult[${s}] = undefined;\n          }\n        } else {\n          newResult[${s}] = ${e}.value;\n        }\n      `)}t.write("payload.value = newResult;"),t.write("return payload;");const o=t.compile();return(t,s)=>o(e,t,s)})(t.shape)),d=n(d,u),c?Wt([],m,d,u,l,e):d):s(d,u):(d.issues.push({expected:"object",code:"invalid_type",input:m,inst:e}),d)}});function Kt(e,t,s,r){for(const a of e)if(0===a.issues.length)return t.value=a.value,t;const n=e.filter(e=>!fe(e));return 1===n.length?(t.value=n[0].value,n[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:s,errors:e.map(e=>e.issues.map(e=>ge(e,r,J())))}),t)}const Ht=G("$ZodUnion",(e,t)=>{ft.init(e,t),te(e._zod,"optin",()=>t.options.some(e=>"optional"===e._zod.optin)?"optional":void 0),te(e._zod,"optout",()=>t.options.some(e=>"optional"===e._zod.optout)?"optional":void 0),te(e._zod,"values",()=>{if(t.options.every(e=>e._zod.values))return new Set(t.options.flatMap(e=>Array.from(e._zod.values)))}),te(e._zod,"pattern",()=>{if(t.options.every(e=>e._zod.pattern)){const e=t.options.map(e=>e._zod.pattern);return new RegExp(`^(${e.map(e=>Q(e.source)).join("|")})$`)}});const s=1===t.options.length,r=t.options[0]._zod.run;e._zod.parse=(n,a)=>{if(s)return r(n,a);let i=!1;const o=[];for(const e of t.options){const t=e._zod.run({value:n.value,issues:[]},a);if(t instanceof Promise)o.push(t),i=!0;else{if(0===t.issues.length)return t;o.push(t)}}return i?Promise.all(o).then(t=>Kt(t,n,e,a)):Kt(o,n,e,a)}}),Xt=G("$ZodIntersection",(e,t)=>{ft.init(e,t),e._zod.parse=(e,s)=>{const r=e.value,n=t.left._zod.run({value:r,issues:[]},s),a=t.right._zod.run({value:r,issues:[]},s);return n instanceof Promise||a instanceof Promise?Promise.all([n,a]).then(([t,s])=>es(e,t,s)):es(e,n,a)}});function Qt(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e===+t)return{valid:!0,data:e};if(ce(e)&&ce(t)){const s=Object.keys(t),r=Object.keys(e).filter(e=>-1!==s.indexOf(e)),n={...e,...t};for(const a of r){const s=Qt(e[a],t[a]);if(!s.valid)return{valid:!1,mergeErrorPath:[a,...s.mergeErrorPath]};n[a]=s.data}return{valid:!0,data:n}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const s=[];for(let r=0;r<e.length;r++){const n=Qt(e[r],t[r]);if(!n.valid)return{valid:!1,mergeErrorPath:[r,...n.mergeErrorPath]};s.push(n.data)}return{valid:!0,data:s}}return{valid:!1,mergeErrorPath:[]}}function es(e,t,s){if(t.issues.length&&e.issues.push(...t.issues),s.issues.length&&e.issues.push(...s.issues),fe(e))return e;const r=Qt(t.value,s.value);if(!r.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(r.mergeErrorPath)}`);return e.value=r.data,e}const ts=G("$ZodEnum",(e,t)=>{ft.init(e,t);const s=function(e){const t=Object.values(e).filter(e=>"number"==typeof e);return Object.entries(e).filter(([e,s])=>-1===t.indexOf(+e)).map(([e,t])=>t)}(t.entries),r=new Set(s);e._zod.values=r,e._zod.pattern=new RegExp(`^(${s.filter(e=>de.has(typeof e)).map(e=>"string"==typeof e?ue(e):e.toString()).join("|")})$`),e._zod.parse=(t,n)=>{const a=t.value;return r.has(a)||t.issues.push({code:"invalid_value",values:s,input:a,inst:e}),t}}),ss=G("$ZodTransform",(e,t)=>{ft.init(e,t),e._zod.parse=(s,r)=>{if("backward"===r.direction)throw new W(e.constructor.name);const n=t.transform(s.value,s);if(r.async){return(n instanceof Promise?n:Promise.resolve(n)).then(e=>(s.value=e,s))}if(n instanceof Promise)throw new q;return s.value=n,s}});function rs(e,t){return e.issues.length&&void 0===t?{issues:[],value:void 0}:e}const ns=G("$ZodOptional",(e,t)=>{ft.init(e,t),e._zod.optin="optional",e._zod.optout="optional",te(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),te(e._zod,"pattern",()=>{const e=t.innerType._zod.pattern;return e?new RegExp(`^(${Q(e.source)})?$`):void 0}),e._zod.parse=(e,s)=>{if("optional"===t.innerType._zod.optin){const r=t.innerType._zod.run(e,s);return r instanceof Promise?r.then(t=>rs(t,e.value)):rs(r,e.value)}return void 0===e.value?e:t.innerType._zod.run(e,s)}}),as=G("$ZodNullable",(e,t)=>{ft.init(e,t),te(e._zod,"optin",()=>t.innerType._zod.optin),te(e._zod,"optout",()=>t.innerType._zod.optout),te(e._zod,"pattern",()=>{const e=t.innerType._zod.pattern;return e?new RegExp(`^(${Q(e.source)}|null)$`):void 0}),te(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(e,s)=>null===e.value?e:t.innerType._zod.run(e,s)}),is=G("$ZodDefault",(e,t)=>{ft.init(e,t),e._zod.optin="optional",te(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,s)=>{if("backward"===s.direction)return t.innerType._zod.run(e,s);if(void 0===e.value)return e.value=t.defaultValue,e;const r=t.innerType._zod.run(e,s);return r instanceof Promise?r.then(e=>os(e,t)):os(r,t)}});function os(e,t){return void 0===e.value&&(e.value=t.defaultValue),e}const cs=G("$ZodPrefault",(e,t)=>{ft.init(e,t),e._zod.optin="optional",te(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,s)=>("backward"===s.direction||void 0===e.value&&(e.value=t.defaultValue),t.innerType._zod.run(e,s))}),ls=G("$ZodNonOptional",(e,t)=>{ft.init(e,t),te(e._zod,"values",()=>{const e=t.innerType._zod.values;return e?new Set([...e].filter(e=>void 0!==e)):void 0}),e._zod.parse=(s,r)=>{const n=t.innerType._zod.run(s,r);return n instanceof Promise?n.then(t=>ds(t,e)):ds(n,e)}});function ds(e,t){return e.issues.length||void 0!==e.value||e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const us=G("$ZodCatch",(e,t)=>{ft.init(e,t),te(e._zod,"optin",()=>t.innerType._zod.optin),te(e._zod,"optout",()=>t.innerType._zod.optout),te(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,s)=>{if("backward"===s.direction)return t.innerType._zod.run(e,s);const r=t.innerType._zod.run(e,s);return r instanceof Promise?r.then(r=>(e.value=r.value,r.issues.length&&(e.value=t.catchValue({...e,error:{issues:r.issues.map(e=>ge(e,s,J()))},input:e.value}),e.issues=[]),e)):(e.value=r.value,r.issues.length&&(e.value=t.catchValue({...e,error:{issues:r.issues.map(e=>ge(e,s,J()))},input:e.value}),e.issues=[]),e)}}),ms=G("$ZodPipe",(e,t)=>{ft.init(e,t),te(e._zod,"values",()=>t.in._zod.values),te(e._zod,"optin",()=>t.in._zod.optin),te(e._zod,"optout",()=>t.out._zod.optout),te(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(e,s)=>{if("backward"===s.direction){const r=t.out._zod.run(e,s);return r instanceof Promise?r.then(e=>ps(e,t.in,s)):ps(r,t.in,s)}const r=t.in._zod.run(e,s);return r instanceof Promise?r.then(e=>ps(e,t.out,s)):ps(r,t.out,s)}});function ps(e,t,s){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},s)}const fs=G("$ZodReadonly",(e,t)=>{ft.init(e,t),te(e._zod,"propValues",()=>t.innerType._zod.propValues),te(e._zod,"values",()=>t.innerType._zod.values),te(e._zod,"optin",()=>t.innerType._zod.optin),te(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(e,s)=>{if("backward"===s.direction)return t.innerType._zod.run(e,s);const r=t.innerType._zod.run(e,s);return r instanceof Promise?r.then(hs):hs(r)}});function hs(e){return e.value=Object.freeze(e.value),e}const xs=G("$ZodCustom",(e,t)=>{et.init(e,t),ft.init(e,t),e._zod.parse=(e,t)=>e,e._zod.check=s=>{const r=s.value,n=t.fn(r);if(n instanceof Promise)return n.then(t=>gs(t,s,r,e));gs(n,s,r,e)}});function gs(e,t,s,r){if(!e){const e={code:"custom",input:s,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(e.params=r._zod.def.params),t.issues.push(ye(e))}}class js{constructor(){this._map=new Map,this._idmap=new Map}add(e,...t){const s=t[0];if(this._map.set(e,s),s&&"object"==typeof s&&"id"in s){if(this._idmap.has(s.id))throw new Error(`ID ${s.id} already exists in the registry`);this._idmap.set(s.id,e)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(e){const t=this._map.get(e);return t&&"object"==typeof t&&"id"in t&&this._idmap.delete(t.id),this._map.delete(e),this}get(e){const t=e._zod.parent;if(t){const s={...this.get(t)??{}};delete s.id;const r={...s,...this._map.get(e)};return Object.keys(r).length?r:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function ys(){return new js}const vs=ys();function bs(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...pe(t)})}function ws(e,t){return new tt({check:"max_length",...pe(t),maximum:e})}function Ns(e,t){return new st({check:"min_length",...pe(t),minimum:e})}function ks(e,t){return new rt({check:"length_equals",...pe(t),length:e})}function _s(e){return new ut({check:"overwrite",tx:e})}function zs(e){const t=function(e,t){const s=new et({check:"custom",...pe(t)});return s._zod.check=e,s}(s=>(s.addIssue=e=>{if("string"==typeof e)s.issues.push(ye(e,s.value,t._zod.def));else{const r=e;r.fatal&&(r.continue=!1),r.code??(r.code="custom"),r.input??(r.input=s.value),r.inst??(r.inst=t),r.continue??(r.continue=!t._zod.def.abort),s.issues.push(ye(r))}},e(s.value,s)));return t}function Ps(e,t){try{var s=e()}catch(r){return t(r)}return s&&s.then?s.then(void 0,t):s}function Ss(e,t){for(var s={};e.length;){var r=e[0],n=r.code,a=r.message,i=r.path.join(".");if(!s[i])if("unionErrors"in r){var o=r.unionErrors[0].errors[0];s[i]={message:o.message,type:o.code}}else s[i]={message:a,type:n};if("unionErrors"in r&&r.unionErrors.forEach(function(t){return t.errors.forEach(function(t){return e.push(t)})}),t){var c=s[i].types,d=c&&c[r.code];s[i]=l(i,t,s,n,d?[].concat(d,r.message):r.message)}e.shift()}return s}function $s(e,t){for(var s={};e.length;){var r=e[0],n=r.code,a=r.message,i=r.path.join(".");if(!s[i])if("invalid_union"===r.code&&r.errors.length>0){var o=r.errors[0][0];s[i]={message:o.message,type:o.code}}else s[i]={message:a,type:n};if("invalid_union"===r.code&&r.errors.forEach(function(t){return t.forEach(function(t){return e.push(t)})}),t){var c=s[i].types,d=c&&c[r.code];s[i]=l(i,t,s,n,d?[].concat(d,r.message):r.message)}e.shift()}return s}function Es(e,t,s){if(void 0===s&&(s={}),"_def"in(r=e)&&"object"==typeof r._def&&"typeName"in r._def)return function(n,a,i){try{return Promise.resolve(Ps(function(){return Promise.resolve(e["sync"===s.mode?"parse":"parseAsync"](n,t)).then(function(e){return i.shouldUseNativeValidation&&M({},i),{errors:{},values:s.raw?Object.assign({},n):e}})},function(e){if(t=e,Array.isArray(null==t?void 0:t.issues))return{values:{},errors:L(Ss(e.errors,!i.shouldUseNativeValidation&&"all"===i.criteriaMode),i)};var t;throw e}))}catch(r){return Promise.reject(r)}};var r;if(function(e){return"_zod"in e&&"object"==typeof e._zod}(e))return function(n,a,i){try{return Promise.resolve(Ps(function(){return Promise.resolve(("sync"===s.mode?ke:ze)(e,n,t)).then(function(e){return i.shouldUseNativeValidation&&M({},i),{errors:{},values:s.raw?Object.assign({},n):e}})},function(e){if(e instanceof be)return{values:{},errors:L($s(e.issues,!i.shouldUseNativeValidation&&"all"===i.criteriaMode),i)};throw e}))}catch(r){return Promise.reject(r)}};throw new Error("Invalid input: not a Zod schema")}const Zs=G("ZodISODateTime",(e,t)=>{St.init(e,t),Bs.init(e,t)});function As(e){return function(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...pe(t)})}(Zs,e)}const Cs=G("ZodISODate",(e,t)=>{$t.init(e,t),Bs.init(e,t)});function Is(e){return function(e,t){return new e({type:"string",format:"date",check:"string_format",...pe(t)})}(Cs,e)}const Os=G("ZodISOTime",(e,t)=>{Et.init(e,t),Bs.init(e,t)});function Ts(e){return function(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...pe(t)})}(Os,e)}const Us=G("ZodISODuration",(e,t)=>{Zt.init(e,t),Bs.init(e,t)});function Ds(e){return function(e,t){return new e({type:"string",format:"duration",check:"string_format",...pe(t)})}(Us,e)}const Fs=G("ZodError",(e,t)=>{be.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:t=>function(e,t){const s=t||function(e){return e.message},r={_errors:[]},n=e=>{for(const t of e.issues)if("invalid_union"===t.code&&t.errors.length)t.errors.map(e=>n({issues:e}));else if("invalid_key"===t.code)n({issues:t.issues});else if("invalid_element"===t.code)n({issues:t.issues});else if(0===t.path.length)r._errors.push(s(t));else{let e=r,n=0;for(;n<t.path.length;){const r=t.path[n];n===t.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(s(t))):e[r]=e[r]||{_errors:[]},e=e[r],n++}}};return n(e),r}(e,t)},flatten:{value:t=>function(e,t=e=>e.message){const s={},r=[];for(const n of e.issues)n.path.length>0?(s[n.path[0]]=s[n.path[0]]||[],s[n.path[0]].push(t(n))):r.push(t(n));return{formErrors:r,fieldErrors:s}}(e,t)},addIssue:{value:t=>{e.issues.push(t),e.message=JSON.stringify(e.issues,K,2)}},addIssues:{value:t=>{e.issues.push(...t),e.message=JSON.stringify(e.issues,K,2)}},isEmpty:{get:()=>0===e.issues.length}})},{Parent:Error}),Rs=Ne(Fs),Ms=_e(Fs),Ls=Pe(Fs),Vs=$e(Fs),Ys=G("ZodType",(e,t)=>(ft.init(e,t),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...s)=>e.clone({...t,checks:[...t.checks??[],...s.map(e=>"function"==typeof e?{_zod:{check:e,def:{check:"custom"},onattach:[]}}:e)]}),e.clone=(t,s)=>me(e,t,s),e.brand=()=>e,e.register=(t,s)=>(t.add(e,s),e),e.parse=(t,s)=>Rs(e,t,s,{callee:e.parse}),e.safeParse=(t,s)=>Ls(e,t,s),e.parseAsync=async(t,s)=>Ms(e,t,s,{callee:e.parseAsync}),e.safeParseAsync=async(t,s)=>Vs(e,t,s),e.spa=e.safeParseAsync,e.refine=(t,s)=>e.check(function(e,t={}){return function(e,t,s){return new e({type:"custom",check:"custom",fn:t,...pe(s)})}(Ur,e,t)}(t,s)),e.superRefine=t=>e.check(zs(t)),e.overwrite=t=>e.check(_s(t)),e.optional=()=>Pr(e),e.nullable=()=>$r(e),e.nullish=()=>Pr($r(e)),e.nonoptional=t=>function(e,t){return new Ar({type:"nonoptional",innerType:e,...pe(t)})}(e,t),e.array=()=>{return function(e,t,s){return new e({type:"array",element:t,...pe(s)})}(jr,e,t);var t},e.or=t=>{return new br({type:"union",options:[e,t],...pe(s)});var s},e.and=t=>new wr({type:"intersection",left:e,right:t}),e.transform=t=>Or(e,new _r({type:"transform",transform:t})),e.default=t=>{return s=t,new Er({type:"default",innerType:e,get defaultValue(){return"function"==typeof s?s():le(s)}});var s},e.prefault=t=>{return s=t,new Zr({type:"prefault",innerType:e,get defaultValue(){return"function"==typeof s?s():le(s)}});var s},e.catch=t=>{return new Cr({type:"catch",innerType:e,catchValue:"function"==typeof(s=t)?s:()=>s});var s},e.pipe=t=>Or(e,t),e.readonly=()=>new Tr({type:"readonly",innerType:e}),e.describe=t=>{const s=e.clone();return vs.add(s,{description:t}),s},Object.defineProperty(e,"description",{get:()=>vs.get(e)?.description,configurable:!0}),e.meta=(...t)=>{if(0===t.length)return vs.get(e);const s=e.clone();return vs.add(s,t[0]),s},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),Gs=G("_ZodString",(e,t)=>{ht.init(e,t),Ys.init(e,t);const s=e._zod.bag;e.format=s.format??null,e.minLength=s.minimum??null,e.maxLength=s.maximum??null,e.regex=(...t)=>e.check(function(e,t){return new at({check:"string_format",format:"regex",...pe(t),pattern:e})}(...t)),e.includes=(...t)=>e.check(function(e,t){return new ct({check:"string_format",format:"includes",...pe(t),includes:e})}(...t)),e.startsWith=(...t)=>e.check(function(e,t){return new lt({check:"string_format",format:"starts_with",...pe(t),prefix:e})}(...t)),e.endsWith=(...t)=>e.check(function(e,t){return new dt({check:"string_format",format:"ends_with",...pe(t),suffix:e})}(...t)),e.min=(...t)=>e.check(Ns(...t)),e.max=(...t)=>e.check(ws(...t)),e.length=(...t)=>e.check(ks(...t)),e.nonempty=(...t)=>e.check(Ns(1,...t)),e.lowercase=t=>e.check(function(e){return new it({check:"string_format",format:"lowercase",...pe(e)})}(t)),e.uppercase=t=>e.check(function(e){return new ot({check:"string_format",format:"uppercase",...pe(e)})}(t)),e.trim=()=>e.check(_s(e=>e.trim())),e.normalize=(...t)=>e.check(function(e){return _s(t=>t.normalize(e))}(...t)),e.toLowerCase=()=>e.check(_s(e=>e.toLowerCase())),e.toUpperCase=()=>e.check(_s(e=>e.toUpperCase()))}),qs=G("ZodString",(e,t)=>{ht.init(e,t),Gs.init(e,t),e.email=t=>e.check(function(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...pe(t)})}(Js,t)),e.url=t=>e.check(function(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...pe(t)})}(Xs,t)),e.jwt=t=>e.check(function(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...pe(t)})}(pr,t)),e.emoji=t=>e.check(function(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...pe(t)})}(Qs,t)),e.guid=t=>e.check(bs(Ks,t)),e.uuid=t=>e.check(function(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...pe(t)})}(Hs,t)),e.uuidv4=t=>e.check(function(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...pe(t)})}(Hs,t)),e.uuidv6=t=>e.check(function(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...pe(t)})}(Hs,t)),e.uuidv7=t=>e.check(function(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...pe(t)})}(Hs,t)),e.nanoid=t=>e.check(function(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...pe(t)})}(er,t)),e.guid=t=>e.check(bs(Ks,t)),e.cuid=t=>e.check(function(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...pe(t)})}(tr,t)),e.cuid2=t=>e.check(function(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...pe(t)})}(sr,t)),e.ulid=t=>e.check(function(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...pe(t)})}(rr,t)),e.base64=t=>e.check(function(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...pe(t)})}(dr,t)),e.base64url=t=>e.check(function(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...pe(t)})}(ur,t)),e.xid=t=>e.check(function(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...pe(t)})}(nr,t)),e.ksuid=t=>e.check(function(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...pe(t)})}(ar,t)),e.ipv4=t=>e.check(function(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...pe(t)})}(ir,t)),e.ipv6=t=>e.check(function(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...pe(t)})}(or,t)),e.cidrv4=t=>e.check(function(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...pe(t)})}(cr,t)),e.cidrv6=t=>e.check(function(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...pe(t)})}(lr,t)),e.e164=t=>e.check(function(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...pe(t)})}(mr,t)),e.datetime=t=>e.check(As(t)),e.date=t=>e.check(Is(t)),e.time=t=>e.check(Ts(t)),e.duration=t=>e.check(Ds(t))});function Ws(e){return function(e,t){return new e({type:"string",...pe(t)})}(qs,e)}const Bs=G("ZodStringFormat",(e,t)=>{xt.init(e,t),Gs.init(e,t)}),Js=G("ZodEmail",(e,t)=>{yt.init(e,t),Bs.init(e,t)}),Ks=G("ZodGUID",(e,t)=>{gt.init(e,t),Bs.init(e,t)}),Hs=G("ZodUUID",(e,t)=>{jt.init(e,t),Bs.init(e,t)}),Xs=G("ZodURL",(e,t)=>{vt.init(e,t),Bs.init(e,t)}),Qs=G("ZodEmoji",(e,t)=>{bt.init(e,t),Bs.init(e,t)}),er=G("ZodNanoID",(e,t)=>{wt.init(e,t),Bs.init(e,t)}),tr=G("ZodCUID",(e,t)=>{Nt.init(e,t),Bs.init(e,t)}),sr=G("ZodCUID2",(e,t)=>{kt.init(e,t),Bs.init(e,t)}),rr=G("ZodULID",(e,t)=>{_t.init(e,t),Bs.init(e,t)}),nr=G("ZodXID",(e,t)=>{zt.init(e,t),Bs.init(e,t)}),ar=G("ZodKSUID",(e,t)=>{Pt.init(e,t),Bs.init(e,t)}),ir=G("ZodIPv4",(e,t)=>{At.init(e,t),Bs.init(e,t)}),or=G("ZodIPv6",(e,t)=>{Ct.init(e,t),Bs.init(e,t)}),cr=G("ZodCIDRv4",(e,t)=>{It.init(e,t),Bs.init(e,t)}),lr=G("ZodCIDRv6",(e,t)=>{Ot.init(e,t),Bs.init(e,t)}),dr=G("ZodBase64",(e,t)=>{Ut.init(e,t),Bs.init(e,t)}),ur=G("ZodBase64URL",(e,t)=>{Dt.init(e,t),Bs.init(e,t)}),mr=G("ZodE164",(e,t)=>{Ft.init(e,t),Bs.init(e,t)}),pr=G("ZodJWT",(e,t)=>{Rt.init(e,t),Bs.init(e,t)}),fr=G("ZodUnknown",(e,t)=>{Mt.init(e,t),Ys.init(e,t)});function hr(){return new fr({type:"unknown"})}const xr=G("ZodNever",(e,t)=>{Lt.init(e,t),Ys.init(e,t)});function gr(e){return function(e,t){return new e({type:"never",...pe(t)})}(xr,e)}const jr=G("ZodArray",(e,t)=>{Yt.init(e,t),Ys.init(e,t),e.element=t.element,e.min=(t,s)=>e.check(Ns(t,s)),e.nonempty=t=>e.check(Ns(1,t)),e.max=(t,s)=>e.check(ws(t,s)),e.length=(t,s)=>e.check(ks(t,s)),e.unwrap=()=>e.element});const yr=G("ZodObject",(e,t)=>{Jt.init(e,t),Ys.init(e,t),te(e,"shape",()=>t.shape),e.keyof=()=>kr(Object.keys(e._zod.def.shape)),e.catchall=t=>e.clone({...e._zod.def,catchall:t}),e.passthrough=()=>e.clone({...e._zod.def,catchall:hr()}),e.loose=()=>e.clone({...e._zod.def,catchall:hr()}),e.strict=()=>e.clone({...e._zod.def,catchall:gr()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=t=>function(e,t){if(!ce(t))throw new Error("Invalid input to extend: expected a plain object");const s=e._zod.def.checks;if(s&&s.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const r=re(e._zod.def,{get shape(){const s={...e._zod.def.shape,...t};return se(this,"shape",s),s},checks:[]});return me(e,r)}(e,t),e.safeExtend=t=>function(e,t){if(!ce(t))throw new Error("Invalid input to safeExtend: expected a plain object");const s={...e._zod.def,get shape(){const s={...e._zod.def.shape,...t};return se(this,"shape",s),s},checks:e._zod.def.checks};return me(e,s)}(e,t),e.merge=t=>function(e,t){const s=re(e._zod.def,{get shape(){const s={...e._zod.def.shape,...t._zod.def.shape};return se(this,"shape",s),s},get catchall(){return t._zod.def.catchall},checks:[]});return me(e,s)}(e,t),e.pick=t=>function(e,t){const s=e._zod.def;return me(e,re(e._zod.def,{get shape(){const e={};for(const r in t){if(!(r in s.shape))throw new Error(`Unrecognized key: "${r}"`);t[r]&&(e[r]=s.shape[r])}return se(this,"shape",e),e},checks:[]}))}(e,t),e.omit=t=>function(e,t){const s=e._zod.def,r=re(e._zod.def,{get shape(){const r={...e._zod.def.shape};for(const e in t){if(!(e in s.shape))throw new Error(`Unrecognized key: "${e}"`);t[e]&&delete r[e]}return se(this,"shape",r),r},checks:[]});return me(e,r)}(e,t),e.partial=(...t)=>function(e,t,s){const r=re(t._zod.def,{get shape(){const r=t._zod.def.shape,n={...r};if(s)for(const t in s){if(!(t in r))throw new Error(`Unrecognized key: "${t}"`);s[t]&&(n[t]=e?new e({type:"optional",innerType:r[t]}):r[t])}else for(const t in r)n[t]=e?new e({type:"optional",innerType:r[t]}):r[t];return se(this,"shape",n),n},checks:[]});return me(t,r)}(zr,e,t[0]),e.required=(...t)=>function(e,t,s){const r=re(t._zod.def,{get shape(){const r=t._zod.def.shape,n={...r};if(s)for(const t in s){if(!(t in n))throw new Error(`Unrecognized key: "${t}"`);s[t]&&(n[t]=new e({type:"nonoptional",innerType:r[t]}))}else for(const t in r)n[t]=new e({type:"nonoptional",innerType:r[t]});return se(this,"shape",n),n},checks:[]});return me(t,r)}(Ar,e,t[0])});function vr(e,t){const s={type:"object",get shape(){var t;return se(this,"shape",e?(t=e,Object.create(Object.getPrototypeOf(t),Object.getOwnPropertyDescriptors(t))):{}),this.shape},...pe(t)};return new yr(s)}const br=G("ZodUnion",(e,t)=>{Ht.init(e,t),Ys.init(e,t),e.options=t.options});const wr=G("ZodIntersection",(e,t)=>{Xt.init(e,t),Ys.init(e,t)});const Nr=G("ZodEnum",(e,t)=>{ts.init(e,t),Ys.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const s=new Set(Object.keys(t.entries));e.extract=(e,r)=>{const n={};for(const a of e){if(!s.has(a))throw new Error(`Key ${a} not found in enum`);n[a]=t.entries[a]}return new Nr({...t,checks:[],...pe(r),entries:n})},e.exclude=(e,r)=>{const n={...t.entries};for(const t of e){if(!s.has(t))throw new Error(`Key ${t} not found in enum`);delete n[t]}return new Nr({...t,checks:[],...pe(r),entries:n})}});function kr(e,t){const s=Array.isArray(e)?Object.fromEntries(e.map(e=>[e,e])):e;return new Nr({type:"enum",entries:s,...pe(t)})}const _r=G("ZodTransform",(e,t)=>{ss.init(e,t),Ys.init(e,t),e._zod.parse=(s,r)=>{if("backward"===r.direction)throw new W(e.constructor.name);s.addIssue=r=>{if("string"==typeof r)s.issues.push(ye(r,s.value,t));else{const t=r;t.fatal&&(t.continue=!1),t.code??(t.code="custom"),t.input??(t.input=s.value),t.inst??(t.inst=e),s.issues.push(ye(t))}};const n=t.transform(s.value,s);return n instanceof Promise?n.then(e=>(s.value=e,s)):(s.value=n,s)}});const zr=G("ZodOptional",(e,t)=>{ns.init(e,t),Ys.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Pr(e){return new zr({type:"optional",innerType:e})}const Sr=G("ZodNullable",(e,t)=>{as.init(e,t),Ys.init(e,t),e.unwrap=()=>e._zod.def.innerType});function $r(e){return new Sr({type:"nullable",innerType:e})}const Er=G("ZodDefault",(e,t)=>{is.init(e,t),Ys.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});const Zr=G("ZodPrefault",(e,t)=>{cs.init(e,t),Ys.init(e,t),e.unwrap=()=>e._zod.def.innerType});const Ar=G("ZodNonOptional",(e,t)=>{ls.init(e,t),Ys.init(e,t),e.unwrap=()=>e._zod.def.innerType});const Cr=G("ZodCatch",(e,t)=>{us.init(e,t),Ys.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});const Ir=G("ZodPipe",(e,t)=>{ms.init(e,t),Ys.init(e,t),e.in=t.in,e.out=t.out});function Or(e,t){return new Ir({type:"pipe",in:e,out:t})}const Tr=G("ZodReadonly",(e,t)=>{fs.init(e,t),Ys.init(e,t),e.unwrap=()=>e._zod.def.innerType});const Ur=G("ZodCustom",(e,t)=>{xs.init(e,t),Ys.init(e,t)});const Dr=vr({name:Ws().min(2,"Name must be at least 2 characters"),email:Ws().email("Please enter a valid email"),phone:Ws().optional(),mdYear:kr(["MD-1","MD-2","MD-3","MD-4","MD-5","MD-6","MD-7","MD-8","MD-9","MD-10","MD-11"]).optional(),studentId:Ws().optional()}),Fr=vr({currentPassword:Ws().min(1,"Current password is required"),newPassword:Ws().min(6,"Password must be at least 6 characters"),confirmPassword:Ws()}).refine(e=>e.newPassword===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});function Rr(){const{user:a,role:o,refreshProfile:c}=e(),{push:l}=t(),[Z,A]=i.useState(null),[C,I]=i.useState(!0),[O,T]=i.useState(!1),[U,D]=i.useState(!1),[F,R]=i.useState(!1),[M,L]=i.useState({assignmentReminders:!0,gradeUpdates:!0,courseAnnouncements:!0,clinicalUpdates:!0,emailNotifications:!0}),V=d({resolver:Es(Dr),defaultValues:{name:"",email:"",phone:"",mdYear:"MD-1",studentId:""}}),Y=d({resolver:Es(Fr)});i.useEffect(()=>{(async()=>{if(a?.uid)try{const e=await r(a.uid);e&&(A(e),V.reset({name:e.name||"",email:e.email||"",phone:e.phone||"",mdYear:e.mdYear||"MD-1",studentId:e.studentId||""}))}catch(e){console.error("Error loading user profile:",e),l({title:"Error",description:"Failed to load profile information",variant:"error"})}finally{I(!1)}})()},[a,V]);const G=(e,t)=>{L(s=>({...s,[e]:t})),l({title:"Settings Updated",description:"Notification preferences saved",variant:"success"})};return C?s.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-6 h-6 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),s.jsx("span",{className:"text-gray-600",children:"Loading profile..."})]})}):s.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-teal-500 rounded-2xl flex items-center justify-center",children:s.jsx(w,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Student Settings"}),s.jsx("p",{className:"text-gray-600",children:"Manage your profile and preferences"})]})]}),s.jsxs(g,{defaultValue:"profile",children:[s.jsxs(j,{className:"grid w-full grid-cols-3",children:[s.jsxs(y,{value:"profile",className:"flex items-center gap-2",children:[s.jsx(w,{className:"w-4 h-4"}),"Profile"]}),s.jsxs(y,{value:"notifications",className:"flex items-center gap-2",children:[s.jsx(N,{className:"w-4 h-4"}),"Notifications"]}),s.jsxs(y,{value:"security",className:"flex items-center gap-2",children:[s.jsx(k,{className:"w-4 h-4"}),"Security"]})]}),s.jsxs(v,{value:"profile",className:"space-y-6",children:[s.jsxs(u,{children:[s.jsx(m,{children:s.jsxs(p,{className:"flex items-center gap-2",children:[s.jsx(w,{className:"w-5 h-5"}),"Personal Information"]})}),s.jsx(f,{children:s.jsxs("form",{onSubmit:V.handleSubmit(async e=>{if(Z?.id){T(!0);try{const t={name:e.name,email:e.email,phone:e.phone,studentId:e.studentId};"admin"===o&&e.mdYear&&(t.mdYear=e.mdYear),await n(Z.id,t),c(),l({title:"Success",description:"Profile updated successfully",variant:"success"})}catch(t){console.error("Error updating profile:",t),l({title:"Error",description:"Failed to update profile",variant:"error"})}finally{T(!1)}}}),className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),s.jsx(x,{...V.register("name"),placeholder:"Enter your full name"}),V.formState.errors.name&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:V.formState.errors.name.message})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),s.jsx(x,{...V.register("email"),type:"email",placeholder:"Enter your email"}),V.formState.errors.email&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:V.formState.errors.email.message})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),s.jsx(x,{...V.register("phone"),placeholder:"Enter your phone number"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"MD Year"}),s.jsx("div",{className:"w-full border border-gray-200 rounded-lg px-3 py-2 bg-gray-50 text-gray-500",children:Z?.mdYear||"Not set"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"MD Year can only be changed by administrators. Contact your academic advisor if this needs to be updated."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Student ID"}),s.jsx(x,{...V.register("studentId"),placeholder:"Enter your student ID"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current GPA"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(b,{variant:"secondary",className:"px-3 py-1",children:Z?.gpa?.toFixed(2)||"Not set"}),s.jsx("span",{className:"text-sm text-gray-500",children:"GPA is calculated from your course grades"})]})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(h,{type:"submit",disabled:O,className:"flex items-center gap-2",children:O?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):s.jsxs(s.Fragment,{children:[s.jsx(_,{className:"w-4 h-4"}),"Save Changes"]})})})]})})]}),s.jsxs(u,{children:[s.jsx(m,{children:s.jsxs(p,{className:"flex items-center gap-2",children:[s.jsx(z,{className:"w-5 h-5"}),"Academic Information"]})}),s.jsx(f,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium text-gray-900",children:"Current MD Year"}),s.jsx(b,{variant:"default",className:"px-3 py-1",children:Z?.mdYear||"Not set"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium text-gray-900",children:"Enrollment Date"}),s.jsx("p",{className:"text-gray-600",children:Z?.enrollmentDate?new Date(1e3*Z.enrollmentDate.seconds).toLocaleDateString():"Not set"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium text-gray-900",children:"Student ID"}),s.jsx("p",{className:"text-gray-600",children:Z?.studentId||"Not set"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium text-gray-900",children:"Account Status"}),s.jsx(b,{variant:"active"===Z?.status?"default":"destructive",className:"px-3 py-1",children:Z?.status||"Unknown"})]})]})})]})]}),s.jsx(v,{value:"notifications",className:"space-y-6",children:s.jsxs(u,{children:[s.jsx(m,{children:s.jsxs(p,{className:"flex items-center gap-2",children:[s.jsx(N,{className:"w-5 h-5"}),"Notification Preferences"]})}),s.jsx(f,{className:"space-y-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:"Assignment Reminders"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Get notified about upcoming assignment deadlines"})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:M.assignmentReminders,onChange:e=>G("assignmentReminders",e.target.checked),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:"Grade Updates"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Receive notifications when grades are posted"})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:M.gradeUpdates,onChange:e=>G("gradeUpdates",e.target.checked),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:"Course Announcements"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Get notified about important course updates"})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:M.courseAnnouncements,onChange:e=>G("courseAnnouncements",e.target.checked),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:"Clinical Updates"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Receive notifications about clinical rotations and assessments"})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:M.clinicalUpdates,onChange:e=>G("clinicalUpdates",e.target.checked),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:"Email Notifications"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Receive email copies of important notifications"})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:M.emailNotifications,onChange:e=>G("emailNotifications",e.target.checked),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]})})]})}),s.jsx(v,{value:"security",className:"space-y-6",children:s.jsxs(u,{children:[s.jsx(m,{children:s.jsxs(p,{className:"flex items-center gap-2",children:[s.jsx(k,{className:"w-5 h-5"}),"Change Password"]})}),s.jsx(f,{children:s.jsxs("form",{onSubmit:Y.handleSubmit(async e=>{T(!0);try{await new Promise(e=>setTimeout(e,1e3)),l({title:"Success",description:"Password changed successfully",variant:"success"}),Y.reset()}catch(t){l({title:"Error",description:"Failed to change password",variant:"error"})}finally{T(!1)}}),className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Password *"}),s.jsxs("div",{className:"relative",children:[s.jsx(x,{...Y.register("currentPassword"),type:U?"text":"password",placeholder:"Enter your current password"}),s.jsx("button",{type:"button",onClick:()=>D(!U),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:U?s.jsx(P,{className:"w-4 h-4"}):s.jsx(S,{className:"w-4 h-4"})})]}),Y.formState.errors.currentPassword&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:Y.formState.errors.currentPassword.message})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password *"}),s.jsxs("div",{className:"relative",children:[s.jsx(x,{...Y.register("newPassword"),type:F?"text":"password",placeholder:"Enter your new password"}),s.jsx("button",{type:"button",onClick:()=>R(!F),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:F?s.jsx(P,{className:"w-4 h-4"}):s.jsx(S,{className:"w-4 h-4"})})]}),Y.formState.errors.newPassword&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:Y.formState.errors.newPassword.message})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password *"}),s.jsx(x,{...Y.register("confirmPassword"),type:"password",placeholder:"Confirm your new password"}),Y.formState.errors.confirmPassword&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:Y.formState.errors.confirmPassword.message})]}),s.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx($,{className:"w-5 h-5 text-blue-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-blue-900",children:"Password Requirements"}),s.jsxs("ul",{className:"text-sm text-blue-700 mt-1 space-y-1",children:[s.jsx("li",{children:" At least 6 characters long"}),s.jsx("li",{children:" Should be different from your current password"}),s.jsx("li",{children:" Use a mix of letters, numbers, and symbols"})]})]})]})}),s.jsx("div",{className:"flex justify-end",children:s.jsx(h,{type:"submit",disabled:O,className:"flex items-center gap-2",children:O?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Updating..."]}):s.jsxs(s.Fragment,{children:[s.jsx(E,{className:"w-4 h-4"}),"Change Password"]})})})]})})]})})]})]})}const Mr=vr({name:Ws().min(2,"Name must be at least 2 characters"),email:Ws().email("Please enter a valid email"),phone:Ws().optional(),department:Ws().min(1,"Department is required"),specialization:Ws().min(1,"Specialization is required"),employeeId:Ws().optional()}),Lr=vr({currentPassword:Ws().min(1,"Current password is required"),newPassword:Ws().min(6,"Password must be at least 6 characters"),confirmPassword:Ws()}).refine(e=>e.newPassword===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});function Vr(){const{user:a,refreshProfile:o}=e(),{push:c}=t(),[l,z]=i.useState(null),[C,I]=i.useState(!0),[O,T]=i.useState(!1),[U,D]=i.useState(!1),[F,R]=i.useState(!1),[M,L]=i.useState({assignmentSubmissions:!0,courseUpdates:!0,studentMessages:!0,gradeReminders:!0,clinicalUpdates:!0,emailNotifications:!0}),V=d({resolver:Es(Mr),defaultValues:{name:"",email:"",phone:"",department:"",specialization:"",employeeId:""}}),Y=d({resolver:Es(Lr)});i.useEffect(()=>{(async()=>{if(a?.uid)try{const e=await r(a.uid);e&&(z(e),V.reset({name:e.name||"",email:e.email||"",phone:e.phone||"",department:e.department||"",specialization:e.specialization||"",employeeId:e.employeeId||""}))}catch(e){console.error("Error loading user profile:",e),c({title:"Error",description:"Failed to load profile information",variant:"error"})}finally{I(!1)}})()},[a,V]);const G=async e=>{if(l?.id){T(!0);try{await n(l.id,{name:e.name,email:e.email,phone:e.phone,department:e.department,specialization:e.specialization,employeeId:e.employeeId}),o(),c({title:"Success",description:"Profile updated successfully",variant:"success"})}catch(t){console.error("Error updating profile:",t),c({title:"Error",description:"Failed to update profile",variant:"error"})}finally{T(!1)}}},q=(e,t)=>{L(s=>({...s,[e]:t})),c({title:"Settings Updated",description:"Notification preferences saved",variant:"success"})};return C?s.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-6 h-6 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),s.jsx("span",{className:"text-gray-600",children:"Loading profile..."})]})}):s.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-green-500 to-teal-500 rounded-2xl flex items-center justify-center",children:s.jsx(Z,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Teacher Settings"}),s.jsx("p",{className:"text-gray-600",children:"Manage your profile and teaching preferences"})]})]}),s.jsxs(g,{defaultValue:"profile",children:[s.jsxs(j,{className:"grid w-full grid-cols-3",children:[s.jsxs(y,{value:"profile",className:"flex items-center gap-2",children:[s.jsx(w,{className:"w-4 h-4"}),"Profile"]}),s.jsxs(y,{value:"notifications",className:"flex items-center gap-2",children:[s.jsx(N,{className:"w-4 h-4"}),"Notifications"]}),s.jsxs(y,{value:"security",className:"flex items-center gap-2",children:[s.jsx(k,{className:"w-4 h-4"}),"Security"]})]}),s.jsxs(v,{value:"profile",className:"space-y-6",children:[s.jsxs(u,{children:[s.jsx(m,{children:s.jsxs(p,{className:"flex items-center gap-2",children:[s.jsx(w,{className:"w-5 h-5"}),"Personal Information"]})}),s.jsx(f,{children:s.jsxs("form",{onSubmit:V.handleSubmit(G),className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),s.jsx(x,{...V.register("name"),placeholder:"Enter your full name"}),V.formState.errors.name&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:V.formState.errors.name.message})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),s.jsx(x,{...V.register("email"),type:"email",placeholder:"Enter your email"}),V.formState.errors.email&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:V.formState.errors.email.message})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),s.jsx(x,{...V.register("phone"),placeholder:"Enter your phone number"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Employee ID"}),s.jsx(x,{...V.register("employeeId"),placeholder:"Enter your employee ID"})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(h,{type:"submit",disabled:O,className:"flex items-center gap-2",children:O?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):s.jsxs(s.Fragment,{children:[s.jsx(_,{className:"w-4 h-4"}),"Save Changes"]})})})]})})]}),s.jsxs(u,{children:[s.jsx(m,{children:s.jsxs(p,{className:"flex items-center gap-2",children:[s.jsx(Z,{className:"w-5 h-5"}),"Professional Information"]})}),s.jsx(f,{children:s.jsxs("form",{onSubmit:V.handleSubmit(G),className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department *"}),s.jsxs("select",{...V.register("department"),className:"w-full border border-gray-200 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500/60 focus:border-blue-500",children:[s.jsx("option",{value:"",children:"Select Department"}),s.jsx("option",{value:"Internal Medicine",children:"Internal Medicine"}),s.jsx("option",{value:"Surgery",children:"Surgery"}),s.jsx("option",{value:"Pediatrics",children:"Pediatrics"}),s.jsx("option",{value:"Obstetrics & Gynecology",children:"Obstetrics & Gynecology"}),s.jsx("option",{value:"Psychiatry",children:"Psychiatry"}),s.jsx("option",{value:"Emergency Medicine",children:"Emergency Medicine"}),s.jsx("option",{value:"Radiology",children:"Radiology"}),s.jsx("option",{value:"Pathology",children:"Pathology"}),s.jsx("option",{value:"Anesthesiology",children:"Anesthesiology"}),s.jsx("option",{value:"Family Medicine",children:"Family Medicine"}),s.jsx("option",{value:"Neurology",children:"Neurology"}),s.jsx("option",{value:"Cardiology",children:"Cardiology"}),s.jsx("option",{value:"Oncology",children:"Oncology"}),s.jsx("option",{value:"Other",children:"Other"})]}),V.formState.errors.department&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:V.formState.errors.department.message})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Specialization *"}),s.jsx(x,{...V.register("specialization"),placeholder:"e.g., Cardiothoracic Surgery, Pediatric Oncology"}),V.formState.errors.specialization&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:V.formState.errors.specialization.message})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(h,{type:"submit",disabled:O,className:"flex items-center gap-2",children:O?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):s.jsxs(s.Fragment,{children:[s.jsx(_,{className:"w-4 h-4"}),"Save Changes"]})})})]})})]}),s.jsxs(u,{children:[s.jsx(m,{children:s.jsxs(p,{className:"flex items-center gap-2",children:[s.jsx(A,{className:"w-5 h-5"}),"Employment Information"]})}),s.jsx(f,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium text-gray-900",children:"Department"}),s.jsx(b,{variant:"default",className:"px-3 py-1",children:l?.department||"Not set"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium text-gray-900",children:"Specialization"}),s.jsx(b,{variant:"secondary",className:"px-3 py-1",children:l?.specialization||"Not set"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium text-gray-900",children:"Employee ID"}),s.jsx("p",{className:"text-gray-600",children:l?.employeeId||"Not set"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium text-gray-900",children:"Hire Date"}),s.jsx("p",{className:"text-gray-600",children:l?.hireDate?new Date(1e3*l.hireDate.seconds).toLocaleDateString():"Not set"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium text-gray-900",children:"Account Status"}),s.jsx(b,{variant:"active"===l?.status?"default":"destructive",className:"px-3 py-1",children:l?.status||"Unknown"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium text-gray-900",children:"Role"}),s.jsx(b,{variant:"outline",className:"px-3 py-1",children:"Faculty"})]})]})})]})]}),s.jsx(v,{value:"notifications",className:"space-y-6",children:s.jsxs(u,{children:[s.jsx(m,{children:s.jsxs(p,{className:"flex items-center gap-2",children:[s.jsx(N,{className:"w-5 h-5"}),"Notification Preferences"]})}),s.jsx(f,{className:"space-y-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:"Assignment Submissions"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Get notified when students submit assignments"})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:M.assignmentSubmissions,onChange:e=>q("assignmentSubmissions",e.target.checked),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:"Course Updates"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Receive notifications about course changes and updates"})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:M.courseUpdates,onChange:e=>q("courseUpdates",e.target.checked),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:"Student Messages"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Get notified about student inquiries and messages"})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:M.studentMessages,onChange:e=>q("studentMessages",e.target.checked),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:"Grade Reminders"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Reminders to grade submitted assignments"})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:M.gradeReminders,onChange:e=>q("gradeReminders",e.target.checked),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:"Clinical Updates"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Receive notifications about clinical teaching opportunities"})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:M.clinicalUpdates,onChange:e=>q("clinicalUpdates",e.target.checked),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:"Email Notifications"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Receive email copies of important notifications"})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:M.emailNotifications,onChange:e=>q("emailNotifications",e.target.checked),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]})})]})}),s.jsx(v,{value:"security",className:"space-y-6",children:s.jsxs(u,{children:[s.jsx(m,{children:s.jsxs(p,{className:"flex items-center gap-2",children:[s.jsx(k,{className:"w-5 h-5"}),"Change Password"]})}),s.jsx(f,{children:s.jsxs("form",{onSubmit:Y.handleSubmit(async e=>{T(!0);try{await new Promise(e=>setTimeout(e,1e3)),c({title:"Success",description:"Password changed successfully",variant:"success"}),Y.reset()}catch(t){c({title:"Error",description:"Failed to change password",variant:"error"})}finally{T(!1)}}),className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Password *"}),s.jsxs("div",{className:"relative",children:[s.jsx(x,{...Y.register("currentPassword"),type:U?"text":"password",placeholder:"Enter your current password"}),s.jsx("button",{type:"button",onClick:()=>D(!U),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:U?s.jsx(P,{className:"w-4 h-4"}):s.jsx(S,{className:"w-4 h-4"})})]}),Y.formState.errors.currentPassword&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:Y.formState.errors.currentPassword.message})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password *"}),s.jsxs("div",{className:"relative",children:[s.jsx(x,{...Y.register("newPassword"),type:F?"text":"password",placeholder:"Enter your new password"}),s.jsx("button",{type:"button",onClick:()=>R(!F),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:F?s.jsx(P,{className:"w-4 h-4"}):s.jsx(S,{className:"w-4 h-4"})})]}),Y.formState.errors.newPassword&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:Y.formState.errors.newPassword.message})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password *"}),s.jsx(x,{...Y.register("confirmPassword"),type:"password",placeholder:"Confirm your new password"}),Y.formState.errors.confirmPassword&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:Y.formState.errors.confirmPassword.message})]}),s.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx($,{className:"w-5 h-5 text-blue-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-blue-900",children:"Password Requirements"}),s.jsxs("ul",{className:"text-sm text-blue-700 mt-1 space-y-1",children:[s.jsx("li",{children:" At least 6 characters long"}),s.jsx("li",{children:" Should be different from your current password"}),s.jsx("li",{children:" Use a mix of letters, numbers, and symbols"})]})]})]})}),s.jsx("div",{className:"flex justify-end",children:s.jsx(h,{type:"submit",disabled:O,className:"flex items-center gap-2",children:O?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Updating..."]}):s.jsxs(s.Fragment,{children:[s.jsx(E,{className:"w-4 h-4"}),"Change Password"]})})})]})})]})})]})]})}const Yr=vr({name:Ws().min(2,"Name must be at least 2 characters"),email:Ws().email("Please enter a valid email"),phone:Ws().optional(),adminLevel:kr(["super","regular"])}),Gr=vr({currentPassword:Ws().min(1,"Current password is required"),newPassword:Ws().min(6,"Password must be at least 6 characters"),confirmPassword:Ws()}).refine(e=>e.newPassword===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});function qr(){const{user:a,refreshProfile:o}=e(),{push:c}=t(),[l,z]=i.useState(null),[Z,A]=i.useState(!0),[D,F]=i.useState(!1),[R,M]=i.useState(!1),[L,V]=i.useState(!1),[Y,G]=i.useState({systemAlerts:!0,userActivity:!0,securityEvents:!0,maintenanceUpdates:!0,backupStatus:!0,emailNotifications:!0}),[q,W]=i.useState({maintenanceMode:!1,allowRegistration:!0,emailVerification:!0,twoFactorAuth:!1,sessionTimeout:30,maxLoginAttempts:5}),B=d({resolver:Es(Yr),defaultValues:{name:"",email:"",phone:"",adminLevel:"regular"}}),J=d({resolver:Es(Gr)});i.useEffect(()=>{(async()=>{if(a?.uid)try{const e=await r(a.uid);e&&(z(e),B.reset({name:e.name||"",email:e.email||"",phone:e.phone||"",adminLevel:e.adminLevel||"regular"}))}catch(e){console.error("Error loading user profile:",e),c({title:"Error",description:"Failed to load profile information",variant:"error"})}finally{A(!1)}})()},[a,B]);const K=(e,t)=>{G(s=>({...s,[e]:t})),c({title:"Settings Updated",description:"Notification preferences saved",variant:"success"})},H=(e,t)=>{W(s=>({...s,[e]:t})),c({title:"System Settings Updated",description:"System configuration saved",variant:"success"})},X=()=>"super"===l?.adminLevel?["user_management","system_admin","user_creation","data_export","system_configuration","backup_management","audit_logs","security_settings"]:l?.permissions||["user_management"];return Z?s.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-6 h-6 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),s.jsx("span",{className:"text-gray-600",children:"Loading profile..."})]})}):s.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-purple-500 to-pink-500 rounded-2xl flex items-center justify-center",children:s.jsx(C,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Admin Settings"}),s.jsx("p",{className:"text-gray-600",children:"Manage system configuration and administrative preferences"})]})]}),s.jsxs(g,{defaultValue:"profile",children:[s.jsxs(j,{className:"grid w-full grid-cols-4",children:[s.jsxs(y,{value:"profile",className:"flex items-center gap-2",children:[s.jsx(w,{className:"w-4 h-4"}),"Profile"]}),s.jsxs(y,{value:"system",className:"flex items-center gap-2",children:[s.jsx(I,{className:"w-4 h-4"}),"System"]}),s.jsxs(y,{value:"notifications",className:"flex items-center gap-2",children:[s.jsx(N,{className:"w-4 h-4"}),"Notifications"]}),s.jsxs(y,{value:"security",className:"flex items-center gap-2",children:[s.jsx(k,{className:"w-4 h-4"}),"Security"]})]}),s.jsxs(v,{value:"profile",className:"space-y-6",children:[s.jsxs(u,{children:[s.jsx(m,{children:s.jsxs(p,{className:"flex items-center gap-2",children:[s.jsx(w,{className:"w-5 h-5"}),"Personal Information"]})}),s.jsx(f,{children:s.jsxs("form",{onSubmit:B.handleSubmit(async e=>{if(l?.id){F(!0);try{await n(l.id,{name:e.name,email:e.email,phone:e.phone,adminLevel:e.adminLevel}),o(),c({title:"Success",description:"Profile updated successfully",variant:"success"})}catch(t){console.error("Error updating profile:",t),c({title:"Error",description:"Failed to update profile",variant:"error"})}finally{F(!1)}}}),className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),s.jsx(x,{...B.register("name"),placeholder:"Enter your full name"}),B.formState.errors.name&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:B.formState.errors.name.message})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),s.jsx(x,{...B.register("email"),type:"email",placeholder:"Enter your email"}),B.formState.errors.email&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:B.formState.errors.email.message})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),s.jsx(x,{...B.register("phone"),placeholder:"Enter your phone number"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Admin Level *"}),s.jsxs("select",{...B.register("adminLevel"),className:"w-full border border-gray-200 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500/60 focus:border-blue-500",children:[s.jsx("option",{value:"regular",children:"Regular Admin"}),s.jsx("option",{value:"super",children:"Super Admin"})]})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(h,{type:"submit",disabled:D,className:"flex items-center gap-2",children:D?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):s.jsxs(s.Fragment,{children:[s.jsx(_,{className:"w-4 h-4"}),"Save Changes"]})})})]})})]}),s.jsxs(u,{children:[s.jsx(m,{children:s.jsxs(p,{className:"flex items-center gap-2",children:[s.jsx(O,{className:"w-5 h-5"}),"Administrative Information"]})}),s.jsx(f,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium text-gray-900",children:"Admin Level"}),s.jsx(b,{variant:"super"===l?.adminLevel?"destructive":"default",className:"px-3 py-1",children:"super"===l?.adminLevel?"Super Admin":"Regular Admin"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium text-gray-900",children:"Account Status"}),s.jsx(b,{variant:"active"===l?.status?"default":"destructive",className:"px-3 py-1",children:l?.status||"Unknown"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium text-gray-900",children:"Role"}),s.jsx(b,{variant:"outline",className:"px-3 py-1",children:"Administrator"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium text-gray-900",children:"Created Date"}),s.jsx("p",{className:"text-gray-600",children:l?.createdAt?new Date(1e3*l.createdAt.seconds).toLocaleDateString():"Not available"})]})]})})]}),s.jsxs(u,{children:[s.jsx(m,{children:s.jsxs(p,{className:"flex items-center gap-2",children:[s.jsx(T,{className:"w-5 h-5"}),"Permissions & Access"]})}),s.jsx(f,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(O,{className:"w-5 h-5 text-blue-600"}),s.jsxs("span",{className:"font-medium text-gray-900",children:["Current Permissions (",X().length,")"]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:X().map(e=>s.jsxs("div",{className:"flex items-center gap-2 p-3 border rounded-lg",children:[s.jsx(E,{className:"w-4 h-4 text-green-600"}),s.jsx("span",{className:"text-sm text-gray-700 capitalize",children:e.replace(/_/g," ")})]},e))}),"super"===l?.adminLevel&&s.jsx("div",{className:"bg-purple-50 p-4 rounded-lg mt-6",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx($,{className:"w-5 h-5 text-purple-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-purple-900",children:"Super Admin Privileges"}),s.jsx("p",{className:"text-sm text-purple-700 mt-1",children:"You have full system access including user management, system configuration, data export, backup management, and security settings."})]})]})})]})})]})]}),s.jsxs(v,{value:"system",className:"space-y-6",children:[s.jsxs(u,{children:[s.jsx(m,{children:s.jsxs(p,{className:"flex items-center gap-2",children:[s.jsx(I,{className:"w-5 h-5"}),"System Configuration"]})}),s.jsxs(f,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:"Maintenance Mode"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Put the system in maintenance mode for updates"})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:q.maintenanceMode,onChange:e=>H("maintenanceMode",e.target.checked),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-red-600"})]})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:"Allow User Registration"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Allow new users to register accounts"})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:q.allowRegistration,onChange:e=>H("allowRegistration",e.target.checked),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:"Email Verification"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Require email verification for new accounts"})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:q.emailVerification,onChange:e=>H("emailVerification",e.target.checked),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:"Two-Factor Authentication"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Require 2FA for all admin accounts"})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:q.twoFactorAuth,onChange:e=>H("twoFactorAuth",e.target.checked),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-4 border-t",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Timeout (minutes)"}),s.jsxs("select",{value:q.sessionTimeout,onChange:e=>H("sessionTimeout",parseInt(e.target.value)),className:"w-full border border-gray-200 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500/60 focus:border-blue-500",children:[s.jsx("option",{value:"15",children:"15 minutes"}),s.jsx("option",{value:"30",children:"30 minutes"}),s.jsx("option",{value:"60",children:"1 hour"}),s.jsx("option",{value:"120",children:"2 hours"}),s.jsx("option",{value:"240",children:"4 hours"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Login Attempts"}),s.jsxs("select",{value:q.maxLoginAttempts,onChange:e=>H("maxLoginAttempts",parseInt(e.target.value)),className:"w-full border border-gray-200 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500/60 focus:border-blue-500",children:[s.jsx("option",{value:"3",children:"3 attempts"}),s.jsx("option",{value:"5",children:"5 attempts"}),s.jsx("option",{value:"10",children:"10 attempts"})]})]})]})]})]}),s.jsxs(u,{children:[s.jsx(m,{children:s.jsxs(p,{className:"flex items-center gap-2",children:[s.jsx(U,{className:"w-5 h-5"}),"System Status"]})}),s.jsx(f,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[s.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-2",children:s.jsx(E,{className:"w-4 h-4 text-green-600"})}),s.jsx("h4",{className:"font-medium text-gray-900",children:"Database"}),s.jsx("p",{className:"text-sm text-green-600",children:"Online"})]}),s.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[s.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-2",children:s.jsx(E,{className:"w-4 h-4 text-green-600"})}),s.jsx("h4",{className:"font-medium text-gray-900",children:"Authentication"}),s.jsx("p",{className:"text-sm text-green-600",children:"Active"})]}),s.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[s.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-2",children:s.jsx(E,{className:"w-4 h-4 text-green-600"})}),s.jsx("h4",{className:"font-medium text-gray-900",children:"Storage"}),s.jsx("p",{className:"text-sm text-green-600",children:"Connected"})]})]})})]})]}),s.jsx(v,{value:"notifications",className:"space-y-6",children:s.jsxs(u,{children:[s.jsx(m,{children:s.jsxs(p,{className:"flex items-center gap-2",children:[s.jsx(N,{className:"w-5 h-5"}),"Administrative Notifications"]})}),s.jsx(f,{className:"space-y-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:"System Alerts"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Critical system errors and warnings"})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:Y.systemAlerts,onChange:e=>K("systemAlerts",e.target.checked),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-red-600"})]})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:"User Activity"}),s.jsx("p",{className:"text-sm text-gray-600",children:"New user registrations and account changes"})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:Y.userActivity,onChange:e=>K("userActivity",e.target.checked),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:"Security Events"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Login attempts, password changes, and security alerts"})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:Y.securityEvents,onChange:e=>K("securityEvents",e.target.checked),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:"Maintenance Updates"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Scheduled maintenance and system updates"})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:Y.maintenanceUpdates,onChange:e=>K("maintenanceUpdates",e.target.checked),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:"Backup Status"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Backup completion and failure notifications"})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:Y.backupStatus,onChange:e=>K("backupStatus",e.target.checked),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:"Email Notifications"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Receive email copies of all administrative notifications"})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:Y.emailNotifications,onChange:e=>K("emailNotifications",e.target.checked),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]})})]})}),s.jsx(v,{value:"security",className:"space-y-6",children:s.jsxs(u,{children:[s.jsx(m,{children:s.jsxs(p,{className:"flex items-center gap-2",children:[s.jsx(k,{className:"w-5 h-5"}),"Security Settings"]})}),s.jsx(f,{children:s.jsxs("form",{onSubmit:J.handleSubmit(async e=>{F(!0);try{await new Promise(e=>setTimeout(e,1e3)),c({title:"Success",description:"Password changed successfully",variant:"success"}),J.reset()}catch(t){c({title:"Error",description:"Failed to change password",variant:"error"})}finally{F(!1)}}),className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Password *"}),s.jsxs("div",{className:"relative",children:[s.jsx(x,{...J.register("currentPassword"),type:R?"text":"password",placeholder:"Enter your current password"}),s.jsx("button",{type:"button",onClick:()=>M(!R),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:R?s.jsx(P,{className:"w-4 h-4"}):s.jsx(S,{className:"w-4 h-4"})})]}),J.formState.errors.currentPassword&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:J.formState.errors.currentPassword.message})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password *"}),s.jsxs("div",{className:"relative",children:[s.jsx(x,{...J.register("newPassword"),type:L?"text":"password",placeholder:"Enter your new password"}),s.jsx("button",{type:"button",onClick:()=>V(!L),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:L?s.jsx(P,{className:"w-4 h-4"}):s.jsx(S,{className:"w-4 h-4"})})]}),J.formState.errors.newPassword&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:J.formState.errors.newPassword.message})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password *"}),s.jsx(x,{...J.register("confirmPassword"),type:"password",placeholder:"Confirm your new password"}),J.formState.errors.confirmPassword&&s.jsx("p",{className:"text-red-500 text-sm mt-1",children:J.formState.errors.confirmPassword.message})]}),s.jsx("div",{className:"bg-red-50 p-4 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx($,{className:"w-5 h-5 text-red-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-red-900",children:"Security Requirements"}),s.jsxs("ul",{className:"text-sm text-red-700 mt-1 space-y-1",children:[s.jsx("li",{children:" At least 6 characters long"}),s.jsx("li",{children:" Should be different from your current password"}),s.jsx("li",{children:" Use a mix of letters, numbers, and symbols"}),s.jsx("li",{children:" Consider using a password manager"})]})]})]})}),s.jsx("div",{className:"flex justify-end",children:s.jsx(h,{type:"submit",disabled:D,className:"flex items-center gap-2",children:D?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Updating..."]}):s.jsxs(s.Fragment,{children:[s.jsx(E,{className:"w-4 h-4"}),"Change Password"]})})})]})})]})})]})]})}function Wr(){const{role:t,loading:r}=e();if(r)return s.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(D,{className:"w-6 h-6 animate-spin text-blue-600"}),s.jsx("span",{className:"text-gray-600",children:"Loading settings..."})]})});if(!t)return s.jsxs("div",{className:"space-y-4",children:[s.jsx(a,{title:"Settings",breadcrumb:[{label:"Home",to:"/"},{label:"Settings"}]}),s.jsxs(u,{children:[s.jsx(m,{children:s.jsxs(p,{className:"flex items-center gap-2 text-amber-600",children:[s.jsx(F,{className:"w-5 h-5"}),"Access Denied"]})}),s.jsx(f,{children:s.jsx("p",{className:"text-gray-600",children:"You need to complete your profile setup before accessing settings."})})]})]});return s.jsxs("div",{className:"space-y-6",children:[s.jsx(a,{title:"Settings",breadcrumb:[{label:"Home",to:"/"},{label:"Settings"}]}),(()=>{switch(t){case"student":return s.jsx(Rr,{});case"teacher":return s.jsx(Vr,{});case"admin":return s.jsx(qr,{});default:return s.jsxs(u,{children:[s.jsx(m,{children:s.jsxs(p,{className:"flex items-center gap-2 text-red-600",children:[s.jsx(F,{className:"w-5 h-5"}),"Unknown Role"]})}),s.jsx(f,{children:s.jsx("p",{className:"text-gray-600",children:"Your account role is not recognized. Please contact your administrator."})})]})}})()]})}export{Wr as default};
